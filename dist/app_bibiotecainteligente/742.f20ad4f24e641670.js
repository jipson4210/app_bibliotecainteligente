"use strict";(self.webpackChunkapp_bibiotecainteligente=self.webpackChunkapp_bibiotecainteligente||[]).push([[742],{6742:(F,p,i)=>{i.r(p),i.d(p,{LoginComponent:()=>v});var m=i(467),d=i(177),s=i(4341),n=i(4438),u=i(4412),f=i(7333);let h=(()=>{class t{constructor(o){this.registrationService=o;const r=localStorage.getItem("currentUser");this.currentUserSubject=new u.t(r?JSON.parse(r):null),this.currentUser=this.currentUserSubject.asObservable(),this.isAuthenticatedSubject=new u.t(!!r),this.isAuthenticated=this.isAuthenticatedSubject.asObservable()}get currentUserValue(){return this.currentUserSubject.value}get isAuthenticatedValue(){return this.isAuthenticatedSubject.value}login(o,r){return this.registrationService.loginUser(o,r).then(e=>(e&&e.user&&(localStorage.setItem("currentUser",JSON.stringify(e.user)),this.currentUserSubject.next(e.user),this.isAuthenticatedSubject.next(!0)),e))}logout(){localStorage.removeItem("currentUser"),this.currentUserSubject.next(null),this.isAuthenticatedSubject.next(!1)}register(o){return this.registrationService.registerUser(o)}static{this.\u0275fac=function(r){return new(r||t)(n.KVO(f.f))}}static{this.\u0275prov=n.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var C=i(9772);function b(t,g){if(1&t&&(n.j41(0,"div",20)(1,"span"),n.EFF(2),n.k0s()()),2&t){const o=n.XpG();n.R7$(2),n.JRh(o.errorMessage)}}function M(t,g){1&t&&(n.j41(0,"small",21),n.EFF(1," El correo electr\xf3nico es requerido "),n.k0s())}function _(t,g){1&t&&(n.j41(0,"span",22),n.EFF(1,"\u{1f441}\ufe0f"),n.k0s())}function P(t,g){1&t&&(n.j41(0,"span",22),n.EFF(1,"\u{1f441}\ufe0f\u200d\u{1f5e8}\ufe0f"),n.k0s())}function O(t,g){1&t&&(n.j41(0,"small",21),n.EFF(1," La contrase\xf1a es requerida "),n.k0s())}function x(t,g){1&t&&(n.j41(0,"span"),n.EFF(1,"Iniciar Sesi\xf3n"),n.k0s())}function w(t,g){1&t&&n.nrm(0,"span",23)}let v=(()=>{class t{constructor(o,r){this.authService=o,this.router=r,this.email="",this.password="",this.loading=!1,this.submitted=!1,this.errorMessage="",this.showPassword=!1,this.authService.currentUserValue&&this.router.navigate(["/home"])}ngOnInit(){}togglePasswordVisibility(){this.showPassword=!this.showPassword}onLogin(){var o=this;return(0,m.A)(function*(){if(o.submitted=!0,o.errorMessage="",o.email&&o.password){o.loading=!0;try{const r=yield o.authService.login(o.email,o.password);r&&r.user&&o.router.navigate(["/home"])}catch(r){console.error("Error en login:",r),o.errorMessage=r?.error?.message||"Error al iniciar sesi\xf3n. Intenta nuevamente."}finally{o.loading=!1}}else o.errorMessage="Por favor completa todos los campos"})()}static{this.\u0275fac=function(r){return new(r||t)(n.rXU(h),n.rXU(C.Ix))}}static{this.\u0275cmp=n.VBU({type:t,selectors:[["app-login"]],standalone:!0,features:[n.aNF],decls:32,vars:15,consts:[["loginForm","ngForm"],[1,"login-container"],[1,"login-card"],[1,"login-header"],[1,"login-form",3,"ngSubmit"],["class","alert alert-error",4,"ngIf"],[1,"form-group"],["for","email"],["type","email","id","email","name","email","placeholder","correo@ejemplo.com","required","",3,"ngModelChange","ngModel"],["class","error-text",4,"ngIf"],["for","password"],[1,"password-input-wrapper"],["id","password","name","password","placeholder","Ingresa tu contrase\xf1a","required","",3,"ngModelChange","type","ngModel"],["type","button","tabindex","-1",1,"toggle-password",3,"click"],["class","icon",4,"ngIf"],["type","submit",1,"btn-login",3,"disabled"],[4,"ngIf"],["class","spinner",4,"ngIf"],[1,"login-footer"],["href","/register"],[1,"alert","alert-error"],[1,"error-text"],[1,"icon"],[1,"spinner"]],template:function(r,e){if(1&r){const l=n.RV6();n.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"h1"),n.EFF(4,"Biblioteca Inteligente"),n.k0s(),n.j41(5,"p"),n.EFF(6,"Inicia sesi\xf3n en tu cuenta"),n.k0s()(),n.j41(7,"form",4,0),n.bIt("ngSubmit",function(){return n.eBV(l),n.Njj(e.onLogin())}),n.DNE(9,b,3,1,"div",5),n.j41(10,"div",6)(11,"label",7),n.EFF(12,"Correo Electr\xf3nico"),n.k0s(),n.j41(13,"input",8),n.mxI("ngModelChange",function(a){return n.eBV(l),n.DH7(e.email,a)||(e.email=a),n.Njj(a)}),n.k0s(),n.DNE(14,M,2,0,"small",9),n.k0s(),n.j41(15,"div",6)(16,"label",10),n.EFF(17,"Contrase\xf1a"),n.k0s(),n.j41(18,"div",11)(19,"input",12),n.mxI("ngModelChange",function(a){return n.eBV(l),n.DH7(e.password,a)||(e.password=a),n.Njj(a)}),n.k0s(),n.j41(20,"button",13),n.bIt("click",function(){return n.eBV(l),n.Njj(e.togglePasswordVisibility())}),n.DNE(21,_,2,0,"span",14)(22,P,2,0,"span",14),n.k0s()(),n.DNE(23,O,2,0,"small",9),n.k0s(),n.j41(24,"button",15),n.DNE(25,x,2,0,"span",16)(26,w,1,0,"span",17),n.k0s()(),n.j41(27,"div",18)(28,"p"),n.EFF(29,"\xbfNo tienes cuenta? "),n.j41(30,"a",19),n.EFF(31,"Reg\xedstrate aqu\xed"),n.k0s()()()()()}2&r&&(n.R7$(9),n.Y8G("ngIf",e.errorMessage),n.R7$(4),n.AVh("is-invalid",e.submitted&&!e.email),n.R50("ngModel",e.email),n.R7$(),n.Y8G("ngIf",e.submitted&&!e.email),n.R7$(5),n.AVh("is-invalid",e.submitted&&!e.password),n.Y8G("type",e.showPassword?"text":"password"),n.R50("ngModel",e.password),n.R7$(2),n.Y8G("ngIf",!e.showPassword),n.R7$(),n.Y8G("ngIf",e.showPassword),n.R7$(),n.Y8G("ngIf",e.submitted&&!e.password),n.R7$(),n.Y8G("disabled",e.loading),n.R7$(),n.Y8G("ngIf",!e.loading),n.R7$(),n.Y8G("ngIf",e.loading))},dependencies:[d.MD,d.bT,s.YN,s.qT,s.me,s.BC,s.cb,s.YS,s.vS,s.cV],styles:['.login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background-image:url(biblioteca-fondo.dcec7cf98a8eeec9.webp);background-size:cover;background-position:center;background-attachment:fixed;position:relative;padding:20px}.login-container[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:#0006;z-index:1}.login-card[_ngcontent-%COMP%]{background:#fff;border-radius:10px;box-shadow:0 10px 40px #0000004d;padding:40px;width:100%;max-width:400px;animation:_ngcontent-%COMP%_slideUp .3s ease;position:relative;z-index:2}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#333;font-size:28px;margin:0 0 10px;font-weight:700}.login-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:14px;margin:0}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:20px}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;color:#333;font-weight:500;font-size:14px}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px;border:2px solid #e0e0e0;border-radius:6px;font-size:14px;transition:all .3s ease;box-sizing:border-box}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input.is-invalid[_ngcontent-%COMP%]{border-color:#e74c3c}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error-text[_ngcontent-%COMP%]{color:#e74c3c;font-size:12px;margin-top:5px;display:block}.login-form[_ngcontent-%COMP%]   .password-input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.login-form[_ngcontent-%COMP%]   .password-input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding-right:45px}.login-form[_ngcontent-%COMP%]   .password-input-wrapper[_ngcontent-%COMP%]   .toggle-password[_ngcontent-%COMP%]{position:absolute;right:12px;background:none;border:none;cursor:pointer;padding:5px;display:flex;align-items:center;justify-content:center}.login-form[_ngcontent-%COMP%]   .password-input-wrapper[_ngcontent-%COMP%]   .toggle-password[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:18px;cursor:pointer}.login-form[_ngcontent-%COMP%]   .password-input-wrapper[_ngcontent-%COMP%]   .toggle-password[_ngcontent-%COMP%]:hover{opacity:.7}.login-form[_ngcontent-%COMP%]   .btn-login[_ngcontent-%COMP%]{width:100%;padding:12px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:6px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;margin-top:10px}.login-form[_ngcontent-%COMP%]   .btn-login[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 5px 20px #667eea66}.login-form[_ngcontent-%COMP%]   .btn-login[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.login-form[_ngcontent-%COMP%]   .btn-login[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.login-form[_ngcontent-%COMP%]   .btn-login[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{display:inline-block;width:16px;height:16px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.login-form[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{padding:12px;border-radius:6px;margin-bottom:20px;font-size:14px;animation:_ngcontent-%COMP%_slideDown .3s ease}.login-form[_ngcontent-%COMP%]   .alert.alert-error[_ngcontent-%COMP%]{background-color:#fdeaea;color:#c53030;border-left:4px solid #c53030}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.login-footer[_ngcontent-%COMP%]{text-align:center;margin-top:20px;padding-top:20px;border-top:1px solid #e0e0e0}.login-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:14px}.login-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#667eea;text-decoration:none;font-weight:600;transition:color .3s ease}.login-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#764ba2;text-decoration:underline}@media (max-width: 480px){.login-card[_ngcontent-%COMP%]{padding:20px}.login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}}']})}}return t})()}}]);